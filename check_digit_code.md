# Business Entity Check Digit

The business entity check digit is generated by CISN0010.  

This routine is a function.  Given the first seven positions of any entity id, this routine will generate the check digit for this business entity. 

The length of the business entity ID and the business ID prefix are elements referenced in the generation of this digit. 

NATURAL Program CISN0010:

```
0010 **********************************************************************
0020 *   SYSTEM NAME: CIS - CORPORATE INFORMATION SYSTEM                   
0030 *                                                                     
0040 *  PROGRAM NAME: CISN0010                                             
0050 *                                                                     
0060 * PROGRAM TITLE: Check digit calculation routine                      
0070 *                                                                     
0080 *    START DATE: 08/18/88                                             
0090 *                                                                     
0100 * FUNCTIONAL DESCRIPTION:                                             
0110 *                                                                     
0120 *   This routine is invoked via a 'CALLNAT' to return a check digit   
0130 *   value for a supplied CORP-ID. This routine                        
0140 *   is based upon a Modulo-10 check digit.                            
0150 *                                                                     
0160 * MAINTENANCE LOG                                                     
0170 *                                                                     
0180 * DATE     INITIALS                      DESCRIPTION                  
0190 * -------- -------- ------------------------------------------------  
0200 * 02/07/89   RHJ    Revised to handle 7 digit corp id in same fashion
0210 *                   as previous 6 digit corp id.                       
0220 * 06/02/94   LJM    IR 1600 ADD LLP PROCESSING - LLP PREFIX = G        
0230 * 04/07/03   BJC    IR 5452 Add BT PROCESSING - BT prefix = B or C     
0240 ***********************************************************************
0250 DEFINE DATA                                                            
0260 PARAMETER                                                              
0270 *                                                                      
0280 1 #CORP-ID-PASS       (A7)                                             
0290 1 #CHECK-DIGIT        (N1)                                             
0300 *                                                                      
0310 LOCAL                                                                  
0320 1 I                   (P7)                                             
0330 1 #CORP-ID            (A7)                                             
0340 1 REDEFINE #CORP-ID                                                    
0350   2 #CORP-DIGIT       (N1/7)                                           
0360 1 REDEFINE #CORP-ID                                                    
0370   2 #CORP-DIGIT-A     (A1/7)                                           
0380 1 #CORP-ID-INTERIM    (A7)                                             
0390 1 REDEFINE #CORP-ID-INTERIM                                            
0400   2 #CORP-INTER-A     (A1/7)                                           
0410 1 #DIGIT-PRODUCT      (N2)                                          
0420 1 REDEFINE #DIGIT-PRODUCT                                           
0430   2 #DIGIT-1          (N1)                                          
0440   2 #DIGIT-2          (N1)                                          
0450 1 #RUNNING-SUM        (N2)                                          
0460 1 #CHECK-WORK         (N3)                                          
0470 1 REDEFINE #CHECK-WORK                                              
0480   2 #CHECK-WORK-FILL  (N2)                                          
0490   2 #CHECK-WORK-DIGIT (N1)                                          
0500 *                                                                   
0510 END-DEFINE                                                          
0520 ********************************************************************
0530 * RHJ 2/07/89                                                       
0540 * Rearrange Corp ID to calculate check digit to same value as would 
0550 * have been calculated under 6 digit scheme. This assumes that all  
0560 * converted Corp IDs will have a 0 (zero) in 2nd position.          
0570 *                                                                   
0580 MOVE #CORP-ID-PASS TO #CORP-ID-INTERIM                              
0590 MOVE #CORP-INTER-A(2) TO #CORP-DIGIT-A(7)                           
0600 ASSIGN #CORP-DIGIT-A(2:6) = #CORP-INTER-A(3:7)
0610 ASSIGN #CORP-DIGIT-A(1) = #CORP-INTER-A(1)                    
0620 *                                                             
0630 * CHECK FOR NUMERICS                                          
0640 *                                                             
0650 FOR I = 2 TO 7                                                
0660   IF #CORP-DIGIT-A (I) NE MASK (N) THEN                       
0670     RESET #CORP-DIGIT (I)                                     
0680   END-IF                                                      
0690 END-FOR                                                       
0700 *                                                             
0710 IF #CORP-DIGIT-A (1) = 'F' OR = 'L' OR = 'M' OR =             
0720                        'S' OR = 'T' OR = 'G' OR = 'B' OR = 'C'
0730   MOVE 8 TO #CORP-DIGIT (1)                                   
0740 END-IF                                                        
0750 *                                                             
0760 ADD #CORP-DIGIT (1) #CORP-DIGIT (3) #CORP-DIGIT (5)           
0770     #CORP-DIGIT (7) TO #RUNNING-SUM                           
0780 *                                                             
0790 FOR I = 2 TO 6 STEP 2                                         
0800   MULTIPLY #CORP-DIGIT (I) BY 2 GIVING #DIGIT-PRODUCT         
0810   ADD #DIGIT-1 #DIGIT-2 TO #RUNNING-SUM               
0820 END-FOR                                               
0830 SUBTRACT #RUNNING-SUM FROM 100 GIVING #CHECK-WORK     
0840 MOVE #CHECK-WORK-DIGIT TO #CHECK-DIGIT                
0850 END             
```
